{% extends 'base.html' %}

{% block title %}Feedback - EduFinanzas{% endblock %}

{% block content %}
<div class="card">
    <h1>üìù Tu Opini√≥n es Importante</h1>
    <p class="lead">¬øTienes alguna queja, reclamo, sugerencia o quieres calificar nuestra aplicaci√≥n?</p>
    
    <!-- Mensajes de Django -->
    {% if messages %}
    <div style="margin: 1rem 0;">
        {% for message in messages %}
            {% if message.tags == 'success' %}
            <div style="padding: 1rem; border-radius: 5px; background: #d4edda; color: #155724; border: 1px solid #c3e6cb;">
                {{ message }}
            </div>
            {% else %}
            <div style="padding: 1rem; border-radius: 5px; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;">
                {{ message }}
            </div>
            {% endif %}
        {% endfor %}
    </div>
    {% endif %}
    
    <form method="post" style="margin-top: 2rem;">
        {% csrf_token %}
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Tipo de mensaje *
                </label>
                <select name="tipo" required style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px;">
                    <option value="">Selecciona una opci√≥n</option>
                    <option value="queja">Queja</option>
                    <option value="reclamo">Reclamo</option>
                    <option value="sugerencia">Sugerencia</option>
                    <option value="calificacion">Calificaci√≥n</option>
                </select>
            </div>
            
            <div id="calificacion-container" style="display: none;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Calificaci√≥n
                </label>
                <select name="calificacion" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px;">
                    <option value="">Selecciona calificaci√≥n</option>
                    <option value="1">1 ‚≠ê - Muy Malo</option>
                    <option value="2">2 ‚≠ê‚≠ê - Malo</option>
                    <option value="3">3 ‚≠ê‚≠ê‚≠ê - Regular</option>
                    <option value="4">4 ‚≠ê‚≠ê‚≠ê‚≠ê - Bueno</option>
                    <option value="5">5 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê - Excelente</option>
                </select>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Nombre *
                </label>
                <input type="text" name="nombre" required 
                       style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Email *
                </label>
                <input type="email" name="email" required 
                       style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px;">
            </div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                Asunto *
            </label>
            <input type="text" name="asunto" required 
                   style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px;"
                   placeholder="Ej: Problema con la secci√≥n de aprendizaje...">
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                Mensaje *
            </label>
            <textarea name="mensaje" required rows="6"
                      style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px;"
                      placeholder="Describe detalladamente tu queja, reclamo, sugerencia o experiencia..."></textarea>
        </div>
        
        <button type="submit" class="btn" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
            Enviar Mensaje üì®
        </button>
    </form>
    
    <!-- Informaci√≥n adicional -->
    <div style="background: #e3f2fd; padding: 1.5rem; border-radius: 10px; margin-top: 2rem;">
        <h3>üí° ¬øQu√© tipo de mensaje enviar?</h3>
        <ul>
            <li><strong>Queja:</strong> Si algo no funcion√≥ como esperabas</li>
            <li><strong>Reclamo:</strong> Si tienes un problema espec√≠fico que necesita soluci√≥n</li>
            <li><strong>Sugerencia:</strong> Si tienes ideas para mejorar la aplicaci√≥n</li>
            <li><strong>Calificaci√≥n:</strong> Si quieres evaluar tu experiencia general</li>
        </ul>
        <p><small>Te responderemos a tu email en un plazo m√°ximo de 48 horas.</small></p>
    </div>
</div>

<script>
// Mostrar/ocultar campo de calificaci√≥n
document.addEventListener('DOMContentLoaded', function() {
    const tipoSelect = document.querySelector('select[name="tipo"]');
    const calificacionContainer = document.getElementById('calificacion-container');
    
    if (tipoSelect && calificacionContainer) {
        tipoSelect.addEventListener('change', function() {
            if (this.value === 'calificacion') {
                calificacionContainer.style.display = 'block';
            } else {
                calificacionContainer.style.display = 'none';
                // Limpiar selecci√≥n de calificaci√≥n
                document.querySelector('select[name="calificacion"]').value = '';
            }
        });
    }
});
</script>
{% endblock %}